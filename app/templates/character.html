{% extends 'anon_layout.html' %}

<!-- przerobione https://github.com/nauvalazhar/bootstrap-5-login-page/tree/master -->
<script type = "text/javascript">
	async function putIndex(id) {
		res = await makeRequestWithJWT("put", "/id") 

		id = res["id"];
		location.href = `/character/${id}`;
	}

	async function delete(id) {
		res = await makeRequestWithJWT("delete", "/character/id") 

		location.href = '/';
	}
</script>


{% block body %}
	<section class="h-100">
		<div class="container h-100 text-center">
			<div class="row justify-content-sm-center h-100">
				<div class="col-xxl-4 col-xl-5 col-lg-5 col-md-7 col-sm-9">
					<div class="card shadow-lg">
						<div class="card-header">
							<h1 class="fs-4 card-title fw-bold mt-3 mb-3"> {{ character.name }}</h1>
						</div>
						<div class="card-body p-3">
							<p> {{ character.timestamp }} </p>
							  <div class="row">
								<div class="col border">
								  Umiejętności:
								  <ul>
								  {% for s in character.skills %}
									  <li> {{ s }} </li>
								  {% endfor %}
								  </ul>
								</div>
								<div class="col border">
								  Cechy:
								  <ul>
								  {% for a in character.attributes %}
									  <li> {{ a }} </li>
								  {% endfor %}
								  </ul>
								</div>
								<div class="col border">
								  Przedmioty:
								  <ul>
								  <!-- avoid character.items() error -->
								  {% for i in character.get('items') %}
									  <li> {{ i }} </li> {% endfor %}
								  </ul>
								</div>
							  </div>
						</div>
						<div class="card-footer py-3 border-0">
							<div class="row">
							  <div class="col">
								  <button type="button" class="btn btn-primary" onclick="putIndex({{ character.id }});" value="regenerate">Generuj ponownie</button>
							  </div>
							  <div class="col">
								  <button type="button" class="btn btn-danger" onclick="delete({{ character.id }});" value="delete">Usuń</button>
							  </div>
							</div>
							<!--
							<a href="register" class="text-dark">Rejestracja</a>
							-->
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}
